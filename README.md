# A python Toolkit for HXMT data analysis


## the usage of HXMT software


**NOTE: Only the software for High Energy detector is introduced below.**


*Before utilizing this toolkit, a HXMT software package should be installed([download page](http://www.hxmt.org/index.php/dataan/2013-03-22-08-13-10)).*

A full description of the usage of HXMT software can be found in fhelp document while it is well installed. The complete prosedures including three steps: PI calculationg, selection of good time intervals, producing data production(light curve, background and spectrum files).

### hepical

The task will simply do the PI calculation from the  channel column of input event file.

Example. Process an HE event file with PI column, "infile," using the defaults to calculate the PI values. 
    
`> hepical evtfile=he_evt.fits outfile=he_pi.fits`

### hegtigen

This task creates a GTI table filtered by a subset of times in input HK high voltage FITS file, HK temperature FITS file, and EHK event file. Filtering parameters are written in "HEParamConfig.fits" file. And they can be read by setting PARAMETERS defaultexpr=yes (see PARAMETERS defaultexpr below), otherwise can be manually inputted by users (see HE Selection Expression below). The output GTI file contains good time intervals for all HE detectors.

Example. 1. Generate the GTI FITS file he_gti.fit using default expression in "HEParamConfig.fits".
    
        `> hegtigen hvfile=HV.FITS tempfile=Th.FITS outfile=he_gti.fits 
        ehkfile=ehk.fits defaultexpr=yes`
    
Example. 2. Generate the GTI FITS file he_gti.fis by inputting parameters manually.
        
        `> hegtigen hvfile=HV.FITS tempfile=TH.FITS outfile=he_gti.fits 
        ehkfile=ehk.fits defaultexpr=no ELV=10 COR=0 SAA=yes T_SAA=10 
        TN_SAA=10 SUN_ANGLE=10 MOON_ANGLE=10 ANG_DIST=0.2 clobber=yes`
        
### hescreen

This task will screen those time intervals selected by good time file. If there is a bad detector, it will screen event file by bad detector file. Anticoincidence detector can be selected as well.

Example.  Process an screened event file, using GTI file, for all detectors. 
    bad detector file and anticoincidence are null.
    
        `> hescreen evtfile="he_pi.fits" gtifile="he_gti.fits" 
        outfile="he_screen.fits" detid=ALL eventtype=0 anticoincidence=""`
        
### hegenlc

This task produces lightcurves, from data screened by good time event
    file. The good time event file is generated by hescreen process (see 
    hescreen) , and is constrained by dead time file. Input data can be 
    rebinned, and the standard plot output is counts/s versus time. Multiple
    lightcurves of selected detectors can be generated in one process. 
    The FITS file of lightcurves have the outfile name as prefix, and 
    detector number in the middle ,and ".lc" as suffix. Each detector has 
    only one lightcurve FITS file. This is the reason that parameter clobber 
    does not work here (see PARAMETER clobber). It is IMPORTANT to ensure 
    the files have same names with outfile do not exist. The good time 
    intervals for each detector is written in outfile as well. 
    
Example.  From a event file screened by good time file, create a lightcurve 
    for detector 0, 5, with a binning of 1 seconds and default start and 
    stop time range. 
    
       `> hegenlc evtfile=he_screen.fits outfile=lc deadfile=DTime.FITS 
        starttime=0 stoptime=0 binsize=1 detid="0 5" channel="pi>0"`
        
### hegenspec

    This task produces spectrum, from data screened by good time event 
    file. It is similar to hegenlc (see hegenlc). The standard plot output 
    is counts/s versus channel. Multiple spectrum pha files will be generated 
    while multiple detectors are selected. Like hegenlc process, The FITS file 
    of spectrum have the outfile name as prefix, and detector number in the 
    middle ,and ".pha" as suffix. Each detector has only one spectrum FITS 
    file. This is the reason that parameter clobber does not work here (see 
    PARAMETER clobber). It is IMPORTANT to ensure that files that have same 
    names with outfile do not exist. The good time intervals for each detector 
    is written in outfile.
    Exposure time and total spectrum accumulation time will be read from 
    dead time file and printed on. And live time divided by total exposure 
    time will be calculated can printed on screen as well.

Example. From a event file screened by good time file, create a spectrum 
    for detector 0, 1, 3, 5, with default start and stop time range. 
    
        `> hegenspec evtfile=he_screen.fits outfile=pha deadfile=deadtime.FITS 
        starttime=0 stoptime=0 detid="0 1 3 5"`
        
        
## the usage of Python Toolkit
   




